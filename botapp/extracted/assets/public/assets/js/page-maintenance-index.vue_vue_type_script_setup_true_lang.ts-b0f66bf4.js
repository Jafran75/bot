import{G as b,r as h,B as y,C as B,X as C,H as f,I as D,Q as S,av as L,J as e,P as i,aB as m,ao as U,ak as V,aC as k,aD as H,N as g,O as G}from"./common.modules-dc3ca4c4.js";import{i as R,aD as I}from"./page-activity-ActivityDetail-fbbc8eb5.js";const T=l=>(k("data-v-88ca4a94"),l=l(),H(),l),E={class:"maintenace"},F=["src"],O={class:"maintenace-body"},P=T(()=>e("div",{class:"text1"},[m("Under Maintenance "),e("div",{class:"text2"},"Server is expected to be launched in")],-1)),j={class:"count-down"},z={key:0,class:"notes"},A=T(()=>e("div",{class:"notes-head"},"Update Notes",-1)),J={class:"notes-body"},Q=["innerHTML"],X="/api/webapi",W=b({__name:"index",setup(l){var _;const w=((_=window.CONFIG)==null?void 0:_.VITE_API_URL)||"https://api.bdg88zf.com",{projectIcon:x}=R(),n=h(0),c=y(()=>{const t=Math.floor(n.value/3600),o=Math.floor(n.value%3600/60),a=Math.floor(n.value%60),s=String(t).padStart(2,"0"),u=String(o).padStart(2,"0"),v=String(a).padStart(2,"0");return{h1:parseInt(s[0],10),h2:parseInt(s[1],10),m1:parseInt(u[0],10),m2:parseInt(u[1],10),s1:parseInt(v[0],10),s2:parseInt(v[1],10)}}),r=h("");let d=null;const M=async()=>{V.get(w+X+"/GetMaintenanceInfo").then(t=>{var o,a,s;if(t.data.enabled===!1)return I.push({name:"login"});r.value=((o=t.data)==null?void 0:o.notifyTip)||"",n.value=N((a=t.data)==null?void 0:a.serverTime,(s=t.data)==null?void 0:s.endTime),n.value>0?p():I.push({name:"login"})}).catch(t=>{console.log("err",t)})},p=()=>{clearInterval(d),d=setTimeout(()=>{n.value--,console.log("countDownS.value",n.value),n.value>0&&p()},1e3)},N=(t,o)=>{const a=new Date(t.replace(" ","T"));return(new Date(o.replace(" ","T"))-a)/1e3};return B(()=>{M()}),C(()=>{clearInterval(d),console.log("离开页面，清空定时器")}),(t,o)=>{const a=f("NavBar"),s=f("svg-icon");return g(),D("div",E,[S(a,null,{center:L(()=>[e("img",{src:G(x),alt:"",style:{height:"100%"}},null,8,F)]),_:1}),e("div",O,[S(s,{name:"maintenace",class:"main-svg"}),P,e("div",j,[e("div",null,i(c.value.h1),1),e("div",null,i(c.value.h2),1),m(": "),e("div",null,i(c.value.m1),1),e("div",null,i(c.value.m2),1),m(": "),e("div",null,i(c.value.s1),1),e("div",null,i(c.value.s2),1)]),r.value?(g(),D("div",z,[A,e("div",J,[e("div",{innerHTML:r.value},null,8,Q)])])):U("v-if",!0)])])}}});export{W as _};
